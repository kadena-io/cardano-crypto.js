<html>
<head>
  <script src="kadena-crypto.js"></script>
</head>
<body>
  <h1>Kadena Test</h1>
  <button id="register" onclick="onRegister()">Register</button>
  <button id="login" onclick="onLogin()">Login</button>
  <script>
    const recovery = lib.kadenaGenMnemonic()
    console.log(recovery)

    const sampleHardenedIndex = 0x80000000
    const index = 0x00
    var root = lib.kadenaMnemonicToRootKeypair(recovery);
    console.log(root.toString('hex'))

    // I'd print out the hex forms here but apparently there isn't a trivial way 
    // to convert ArrayBuffers or Uint8Array to hex strings on the browser?!
    // Buffer offers this, and our underying nodejs code uses Buffer, but then
    // it gets browserified and we don't expose it in the api
    const [xprvRaw, xpubRaw] = lib.kadenaGenKeypair(root, sampleHardenedIndex | index)

    const xprv = new Uint8Array(xprvRaw)
    const xpub = new Uint8Array(xpubRaw)

    var msg = 'hello there'
    var sig = lib.kadenaSign(msg, xprv)
    console.log(lib.kadenaVerify(msg, xpub, sig))

    var msg2 = "not hello there"
    console.log(lib.kadenaVerify(msg2, xpub, sig))

  </script>
</body>
</html>
